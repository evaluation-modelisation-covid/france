geom_line(data= scenario,
aes(x=date, value, group=scenarios), color = mygrey, size=1) +
geom_line(data= true_data_beds_hosp_rea,
aes(x=date, y=rea, color = myred, group="réalité"), size=1) +
annotate('text', x = as.Date("2022-01-20"), y = 2800, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2022-03-20"), y = 4400, label = "scénarios \n'probables'", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-25"), y = 5800, label = "scénarios \n'moins probables'", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2022-01-30"), y = 9000, label = "hypothèse (moins) fausse :\nefficacité vaccinale 60%",
color = myred, fontface = "bold",
size = 10, alpha = .4,
family = "Times New Roman") +
xlim(date("2021-12-01"), date("2022-04-01")) + ylim(0,10000) +
labs(title = "Lits de soins critiques",
subtitle = "scénarios publiés par l'Institut Pasteur le 7 janvier 2022\n",
caption = "\nSource: Institut Pasteur Rapport 7 janvier \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/omicron-variant-epidemic/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_lowVE.png",
plot =g, width = w, height = h)
ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_lowVE.svg",
plot =g, width = w, height = h)
# #high VE
# scenario <- read.csv("2022_01_07_Pasteur/beds_SC_high_VE.csv", sep=";") %>%
#   mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
# g <- scenario %>%
#   gather(key=pasteur, value = value, -date) %>%
#   ggplot(aes(date, value, group=pasteur, color="scénarios")) + geom_line(size=1) +
#   geom_line(data= true_data_beds_hosp_rea,
#             aes(x=date, y=rea, color = "réalité", group="réalité"), size=1) +
#   annotate('text', x = as.Date("2022-01-20"), y = 2000, label = "réalité", color = myred, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2022-03-15"), y = 5600, label = "scénarios", color = mygrey, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2021-12-01"), y = 7000, label =
#              "Efficacité contre infection Omicron\n2 doses : <6 mois : 55% ; >6 mois : 25%\n3 doses : <6 mois : 85% ; >6 mois : 70%",
#            color = "black", fontface = "bold", size = 2.9, hjust = 0,
#            family = "Times New Roman") +
#   xlim(date("2021-12-01"), date("2022-04-01")) + ylim(0, 8000) + g_theme +
#   labs(title = "Lits de soins critiques, hypothèses vaccination standard",
#        subtitle = "scénarios publiés par l'Institut Pasteur le 7 janvier 2022\n",
#        caption = "\nSource: Institut Pasteur Rapport 7 janvier \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/omicron-variant-epidemic/
#        https://evaluation-modelisation-covid.github.io/france/")
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_high_VE.png",
#        plot =g, width = w, height = h)
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_high_VE.svg",
#        plot =g, width = w, height = h)
#
# #low VE
# scenario <- read.csv("2022_01_07_Pasteur/beds_SC_low_VE.csv", sep=";") %>%
#   mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
# g <- scenario %>%
#   gather(key=pasteur, value = value, -date) %>%
#   ggplot(aes(date, value, group=pasteur, color="scénarios")) + geom_line(size=1) +
#   geom_line(data= true_data_beds_hosp_rea,
#             aes(x=date, y=rea, color = "réalité", group="réalité"), size=1) +
#   annotate('text', x = as.Date("2022-01-20"), y = 2000, label = "réalité", color = myred, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2022-03-15"), y = 5600, label = "scénarios", color = mygrey, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2021-12-01"), y = 7000, label =
#              "Efficacité contre infection Omicron\n2 doses : <6 mois : 40% ; >6 mois : 10%\n3 doses : <6 mois : 60% ; >6 mois : 40%",
#            color = "black", fontface = "bold", size = 2.9, hjust = 0,
#            family = "Times New Roman") +
#   xlim(date("2021-12-01"), date("2022-04-01")) + ylim(0, 8000) + g_theme +
#   labs(title = "Lits de soins critiques, hypothèses vaccination pessimiste",
#        subtitle = "scénarios publiés par l'Institut Pasteur le 7 janvier 2022\n",
#        caption = "\nSource: Institut Pasteur Rapport 7 janvier \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/omicron-variant-epidemic/
#        https://evaluation-modelisation-covid.github.io/france/")
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_low_VE.png",
#        plot =g, width = w, height = h)
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_low_VE.svg",
#        plot =g, width = w, height = h)
# #both VE on 1 graph
# scenario_high <- read.csv("2022_01_07_Pasteur/beds_SC_high_VE.csv", sep=";") %>%
#   mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T)) %>%
#   gather(key=scenarios, value = value, -date)
# scenario_low <- read.csv("2022_01_07_Pasteur/beds_SC_low_VE.csv", sep=";") %>%
#   mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T)) %>%
#   gather(key=scenarios, value = value, -date)
#différenciés
# g <- scenario_high %>%
#   ggplot(aes(date, value, group=scenarios)) + geom_line(color = mygrey, size=1, linetype = "dashed") +
#   geom_line(data= scenario_low,
#             aes(x=date, value, group=scenarios), color = mygrey, size=1) +
#   geom_line(data= true_data_beds_hosp_rea,
#             aes(x=date, y=rea, color = myred, group="réalité"), size=1) +
#   annotate('text', x = as.Date("2022-01-20"), y = 3000, label = "réalité", color = myred, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2022-03-08"), y = 6700, label = "Faible \nefficacité\n vaccinale", color = mygrey, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2022-02-25"), y = 1300, label = "Haute \nefficacité\n vaccinale", color = mygrey, fontface = "bold",
#            family = "Times New Roman") +
#   xlim(date("2021-12-01"), date("2022-04-01")) +
#   labs(title = "Lits de soins critiques",
#        subtitle = "scénarios publiés par l'Institut Pasteur le 7 janvier 2022\n",
#        caption = "\nSource: Institut Pasteur Rapport 7 janvier \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/omicron-variant-epidemic/
#        https://evaluation-modelisation-covid.github.io/france/")
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_both_VE.png",
#        plot =g, width = w, height = h)
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_both_VE.svg",
#        plot =g, width = w, height = h)
# #non différenciés
# g <- scenario_high %>%
#   ggplot(aes(date, value, group=scenarios)) + geom_line(color = mygrey, size=1) +
#   geom_line(data= scenario_low,
#             aes(x=date, value, group=scenarios), color = mygrey, size=1) +
#   geom_line(data= true_data_beds_hosp_rea,
#             aes(x=date, y=rea, color = myred, group="réalité"), size=1) +
#   annotate('text', x = as.Date("2022-01-20"), y = 3000, label = "réalité", color = myred, fontface = "bold",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2022-03-15"), y = 5000, label = "scénarios", color = mygrey, fontface = "bold",
#            family = "Times New Roman") +
#   xlim(date("2021-12-01"), date("2022-04-01")) +
#   labs(title = "Lits de soins critiques",
#        subtitle = "scénarios publiés par l'Institut Pasteur le 7 janvier 2022\n",
#        caption = "\nSource: Institut Pasteur Rapport 7 janvier \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/omicron-variant-epidemic/
#        https://evaluation-modelisation-covid.github.io/france/")
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_both_VE.png",
#        plot =g, width = w, height = h)
# ggsave("../images/Pasteur_2022_Fevrier/Pasteur_2022_fevrier_SC_both_VE.svg",
#        plot =g, width = w, height = h)
# Short term April-Mai --------------------------------------------------------
scenario <- read.csv("short_term/new_SC/2021_04_02.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-03-29"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-03-28"), y = 20, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-04-17"), y = 480, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-04-10"), y = 380, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-03-01"), date("2021-05-15")) + g_theme + ylim(0, 670) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 28 mars 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_02_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_02_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_04_12.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-04-08"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-04-07"), y = 20, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-04-26"), y = 470, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-04-17"), y = 380, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-03-01"), date("2021-05-15")) + g_theme + ylim(0, 670) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 08 avril 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_12_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_12_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_04_20.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-04-16"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-04-15"), y = 20, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-05-07"), y = 330, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-04-23"), y = 420, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-03-01"), date("2021-05-15")) + g_theme + ylim(0, 670) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 16 avril 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_20_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_20_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_04_26.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-04-23"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-04-22"), y = 20, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-05-10"), y = 350, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-04-29"), y = 220, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-03-01"), date("2021-05-15")) + g_theme + ylim(0, 670) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 23 avril 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_26_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_april_may/new_SC/2021_04_26_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_05_04.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-04-30"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-04-29"), y = 20, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-05-12"), y = 310, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-05-10"), y = 140, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-03-01"), date("2021-05-15")) + g_theme + ylim(0, 670) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 30 avril 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_april_may/new_SC/2021_05_04_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_april_may/new_SC/2021_05_04_new_SC.svg",
plot =g, width = w, height = h)
# Short term May-June ----------------------------------------------------------
scenario <- read.csv("short_term/new_SC/2021_05_11.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-05-11"), linetype = "dashed", alpha=.5) +
xlim(date("2021-05-01"), date("2021-06-30")) + g_theme + ylim(0, 400) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 5 mai 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
#Reprendre les mesures
scenario <- read.csv("short_term/new_SC/2021_05_18.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-05-18"), linetype = "dashed", alpha=.5) +
xlim(date("2021-05-01"), date("2021-06-30")) + g_theme + ylim(0, 400) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 18 mai 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
#reprendre les mesures
scenario <- read.csv("short_term/new_SC/2021_05_26.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-05-26"), linetype = "dashed", alpha=.5) +
xlim(date("2021-05-01"), date("2021-06-30")) + g_theme + ylim(0, 400) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 26 mai 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
scenario <- read.csv("short_term/new_SC/2021_05_31.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-05-31"), linetype = "dashed", alpha=.5) +
xlim(date("2021-05-01"), date("2021-06-30")) + g_theme + ylim(0, 400) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 31 mai 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
scenario <- read.csv("short_term/new_SC/2021_06_07.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-06-07"), linetype = "dashed", alpha=.5) +
xlim(date("2021-05-01"), date("2021-06-30")) + g_theme + ylim(0, 400) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 6 juin 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
scenario <- read.csv("short_term/new_SC/2021_06_15.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-06-15"), linetype = "dashed", alpha=.5) +
xlim(date("2021-05-01"), date("2021-06-30")) + g_theme + ylim(0, 400) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 15 juin 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
# Short term August -------------------------------------------------------
scenario <- read.csv("short_term/new_SC/2021_08_24.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-08-20"), linetype = "dashed", alpha=.5) +
xlim(date("2021-07-15"), date("2021-09-30")) + g_theme + ylim(0, 250) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 20 août 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
scenario <- read.csv("short_term/new_SC/2021_08_31.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-08-27"), linetype = "dashed", alpha=.5) +
xlim(date("2021-07-01"), date("2021-09-30")) + g_theme + ylim(0, 250) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 27 août 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
# Short term December -----------------------------------------------------
scenario <- read.csv("short_term/new_SC/2021_11_25.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-11-18"), y = 5, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-12-05"), y = 160, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-11-28"), y = 210, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-11-19"), linetype = "dashed", alpha=.5) +
xlim(date("2021-11-01"), date("2021-12-25")) + g_theme + ylim(0, 410) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 19 novembre 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_december/new_SC/2021_11_25_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_december/new_SC/2021_11_25_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_11_30.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-11-26"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-11-25"), y = 5, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-12-15"), y = 280, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-06"), y = 250, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-11-01"), date("2021-12-25")) + g_theme + ylim(0, 410) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 26 novembre 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_december/new_SC/2021_11_30_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_december/new_SC/2021_11_30_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_12_06.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
geom_vline(xintercept = as.Date("2021-12-03"), linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2021-12-02"), y = 5, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-12-21"), y = 340, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-15"), y = 230, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
xlim(date("2021-11-01"), date("2021-12-25")) + g_theme + ylim(0, 410) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 3 décembre 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_december/new_SC/2021_12_06_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_december/new_SC/2021_12_06_new_SC.svg",
plot =g, width = w, height = h)
scenario <- read.csv("short_term/new_SC/2021_12_13.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- ggplot(data= true_data_new_hosp_rea_no_mean) +
geom_line(aes(x=date, y=new_rea), color = myred, alpha = .2, size = .5) +
geom_line(data = scenario, aes(x = date, y=projection, color="projection"), size=2.5) +
geom_line(data = scenario, aes(x = date , y=reality, color = " réalité"), size=1) +
annotate('text', x = as.Date("2021-12-09"), y = 5, label = "date de la\nprojection", color = mygrey, fontface = "bold",
family = "Times New Roman", hjust = "right", vjust = "bottom") +
annotate('text', x = as.Date("2021-12-21"), y = 380, label = "projection", color = mygrey, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2021-12-20"), y = 230, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
geom_vline(xintercept = as.Date("2021-12-10"), linetype = "dashed", alpha=.5) +
xlim(date("2021-11-01"), date("2021-12-25")) + g_theme + ylim(0, 410) +
labs(title = "Admissions journalières en soins critiques",
subtitle = "Projection de l'Institut Pasteur du 10 décembre 2021\n",
caption = "\nSource: Projection à court terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/short_term/2021_december/new_SC/2021_12_13_new_SC.png",
plot =g, width = w, height = h)
ggsave("../images/short_term/2021_december/new_SC/2021_12_13_new_SC.svg",
plot =g, width = w, height = h)
# scenario <- read.csv("short_term/new_SC/2021_12_20.csv", sep=";") %>%
#   mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
# ggplot(data = scenario, aes(x = date)) +
#   geom_line(aes(y=projection, color="projection"), size=2.5, se=F) +
#   geom_line(aes(y=reality, color = " réalité"), size=1) +
#   annotate('text', x = as.Date("2021-12-05"), y = 1420, label = "projection à 2 semaines\nsurestimation +40%", color = '#515a5a', fontface = "italic",
#            family = "Times New Roman") +
#   annotate('text', x = as.Date("2021-12-10"), y = 900, label = "réalité", color = myred, fontface = "bold",
#            family = "Times New Roman") +
#   geom_vline(xintercept = as.Date("2021-12-20"), linetype = "dashed", alpha=.5) +
#   xlim(date("2021-11-01"), date("2021-12-31")) + g_theme + ylim(0, 500) +
#   labs(title = "Admissions journalières à l'hôpital",
#        subtitle = "Projection de l'Institut Pasteur du 20 décembre 2021\n",
#        caption = "\nSource: Projection à cour terme des besoins hospitaliers, Institut Pasteur \nhttps://modelisation-covid19.pasteur.fr/realtime-analysis/hospital/
#        https://evaluation-modelisation-covid.github.io/france/")
#Lits de réanimation
scenario <- read.csv("2020_10_30_Pasteur/beds_rea.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
g <- scenario %>%
gather(key=pasteur, value = value, -date) %>%
ggplot(aes(date, value-200, group=pasteur, color="scénarios")) + geom_smooth(se=F) +
geom_line(data= true_data_beds_hosp_rea,
aes(x=date, y=rea, color = "réalité", group="true data"), size = 1) +
annotate('text', x = as.Date("2020-10-18"), y = 1400, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
annotate('text', x = as.Date("2020-11-10"), y = 7000, label = "scénarios", color = mygrey, fontface = "bold",
family = "Times New Roman") +
xlim(as.Date("2020-10-15"), as.Date("2020-12-10")) + g_theme  +
labs(title = "Lits de réanimation occupés",
subtitle = "scénarios de l'Institut Pasteur du 30/10/2020 après l'annonce du confinement \n",
caption = "\nSource: non publié mais retranscrit dans Les Echos le 3 novembre \n'Covid : la décrue dans les servies de réanimation espérée en France dans une dizaine de jours'
https://evaluation-modelisation-covid.github.io/france/")
ggsave("../images/Pasteur_2020_Novembre/Pasteur_novembre_reanimations.png",
plot =g, width = w, height = h)
ggsave("../images/Pasteur_2020_Novembre/Pasteur_novembre_reanimations.svg",
plot =g, width = w, height = h)
#media graph
media <- read.csv("medias.csv", sep=";") %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T)) %>%
filter(rapport == "Pasteur 30 octobre")
g <- ggplot(media) +
geom_jitter(aes(date, chiffres, color = "relayé par la presse"), size = 1.5, width = 3, height = 200) +
geom_line(data= true_data_beds_hosp_rea,
aes(x=date, y=rea, color = "réalité", group="true data"), size = 1) +
geom_hline(yintercept = 9000, linetype = "dashed", alpha=.5) +
annotate('text', x = as.Date("2020-10-18"), y = 1400, label = "réalité", color = myred, fontface = "bold",
family = "Times New Roman") +
annotate("text", x=as.Date("2020-12-30"), y=9800,
label="'Nous savons que quoi que nous fassions, près de \n9000 patients seront en réanimation à la mi-novembre'
Emmanuel Macron, discours du 28 octobre",
fontface = "italic", size=3, hjust=1) + ylim(0,10500) +
xlim(as.Date("2020-10-15"), as.Date("2020-12-30")) + g_theme +
labs(title = "Lits de réanimation occupés",
subtitle = "Chaque point représente une projection relayée par la presse \nLa ligne horizontale correspond à la citation d'Emmanuel Macron\n",
caption = "")
ggsave("../images/media/media_novembre.png", plot =g, width = w, height = h)
ggsave("../images/media/media_novembre.svg", plot =g, width = w, height = h)
