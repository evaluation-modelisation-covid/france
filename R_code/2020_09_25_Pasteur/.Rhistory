filter(dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(
jour = as.Date(jour, format = "%d/%m/%Y", optional = T),
week = floor_date(jour, "week")) %>%
select(week, incid_rea, incid_hosp) %>%
group_by(week) %>%
summarise(hosp = sum(incid_hosp), rea = sum(incid_rea))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_smooth(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_smooth(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_smooth(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04"))
adm_heb_hop_1 <- read_delim("Admission_hebd_hop_1.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
true_data_new_hosp_rea <- read_delim("true_data_new_hosp_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
#removes overseas territories (Pasteur scenarios only for metropolitan France, not sur for INSERM)
filter(dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(
jour = as.Date(jour, format = "%d/%m/%Y", optional = T),
week = floor_date(jour, "week")) %>%
select(week, incid_rea, incid_hosp) %>%
group_by(week) %>%
summarise(hosp = sum(incid_hosp), rea = sum(incid_rea))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_smooth(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_smooth(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_smooth(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04"))
adm_heb_hop_1 <- read_delim("new_hosp_INSERM.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
true_data_new_hosp_rea <- read_delim("true_data_new_hosp_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
#removes overseas territories (Pasteur scenarios only for metropolitan France, not sur for INSERM)
filter(dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(
jour = as.Date(jour, format = "%d/%m/%Y", optional = T),
week = floor_date(jour, "week")) %>%
select(week, incid_rea, incid_hosp) %>%
group_by(week) %>%
summarise(hosp = sum(incid_hosp), rea = sum(incid_rea))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_smooth(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_smooth(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_smooth(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04"))
setwd("~/Desktop/Graphs covid/2021-08-05_Pasteur")
new_hosp <- read_delim("new_hosp_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE)
View(new_hosp)
new_hosp <- read_delim("new_hosp_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
new_hosp <- read_delim("new_hosp_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data = new_hosp, aes(x = date)) +
geom_smooth(aes(y = RedVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_smooth(aes(y = BlueVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_smooth(aes(y = GreenVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_smooth(aes(y = RedR, color = "Pasteur Scenario"), se=FALSE) +
geom_smooth(aes(y = OrangeR, color = "Pasteur Scenario"), se=FALSE) +
geom_smooth(aes(y = LightBlueR, color = "Pasteur Scenario"), se=FALSE) +
geom_smooth(aes(y = DarkBlueR, color = "Pasteur Scenario"), se=FALSE)
ggplot(data = new_hosp, aes(x = date)) +
geom_line(aes(y = RedVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = BlueVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = GreenVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = RedR, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = OrangeR, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = LightBlueR, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = DarkBlueR, color = "Pasteur Scenario"), se=FALSE)
setwd("~/Desktop/Graphs covid/2020-09-25_Pasteur")
lits_rea <- read_delim("lits_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
#true data from https://www.data.gouv.fr/fr/datasets/donnees-hospitalieres-relatives-a-lepidemie-de-covid-19/
#"donnees-hospitalieres-covid"
#to open it directly : https://www.data.gouv.fr/fr/datasets/r/63352e38-d353-4b54-bfd1-f1b3ee1cabd7
true_data_hosp_rea <- read_delim("true_data_hosp_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
filter(
#otherwise double count (0 = all, 1=men, 2=women)
sexe =="0",
#removes overseas territories (Pasteur scenarios only for metropolitan France)
dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(date = date(jour)) %>%
select(jour, rea, hosp) %>%
group_by(jour) %>%
summarise(
hosp = sum(hosp),
rea = sum(rea))
ggplot(data = lits_rea, aes(x=date)) +
geom_smooth(aes(y=rea_bed_14rate, color="Pasteur scenarios")) +
geom_smooth(aes(y=rea_bed_22rate, color="Pasteur scenarios")) +
geom_line(data= true_data_hosp_rea, aes(x=jour, y=rea, color = "true data")) +
#see dates of partial curfew + 2 weeks after (time to see the effects on reanimations) cf dates https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
geom_vline(xintercept = date("2020-10-14"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2020-10-28"), linetype = "dashed", alpha=.5) +
#date limitations
xlim(date("2020-09-15"), date("2020-11-10")) + theme_classic()
ggplot(data = lits_rea, aes(x=date)) +
geom_line(aes(y=rea_bed_14rate, color="Pasteur scenarios")) +
geom_line(aes(y=rea_bed_22rate, color="Pasteur scenarios")) +
geom_line(data= true_data_hosp_rea, aes(x=jour, y=rea, color = "true data")) +
#see dates of partial curfew + 2 weeks after (time to see the effects on reanimations) cf dates https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
geom_vline(xintercept = date("2020-10-14"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2020-10-28"), linetype = "dashed", alpha=.5) +
#date limitations
xlim(date("2020-09-15"), date("2020-11-10")) + theme_classic()
ggplot(data = lits_rea, aes(x=date)) +
geom_line(aes(y=rea_bed_14rate, color="Pasteur scenarios")) +
geom_line(aes(y=rea_bed_22rate, color="Pasteur scenarios")) +
geom_line(data= true_data_hosp_rea, aes(x=jour, y=rea, color = "true data")) +
#see dates of partial curfew + 2 weeks after (time to see the effects on reanimations) cf dates https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
geom_vline(xintercept = date("2020-10-14"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2020-10-28"), linetype = "dashed", alpha=.5) +
#date limitations
xlim(date("2020-09-15"), date("2020-11-10")) + ylim(0, 15000) + theme_classic()
setwd("~/Desktop/Graphs covid/2021-02-02_Inserm")
adm_heb_hop_1 <- read_delim("new_hosp_INSERM.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
true_data_new_hosp_rea <- read_delim("true_data_new_hosp_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
#removes overseas territories (Pasteur scenarios only for metropolitan France, not sur for INSERM)
filter(dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(
jour = as.Date(jour, format = "%d/%m/%Y", optional = T),
week = floor_date(jour, "week")) %>%
select(week, incid_rea, incid_hosp) %>%
group_by(week) %>%
summarise(hosp = sum(incid_hosp), rea = sum(incid_rea))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_smooth(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_smooth(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_smooth(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_smooth(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04"))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_line(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_line(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_line(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04"))
setwd("~/Desktop/Graphs covid/2021-08-05_Pasteur")
ggplot(data = new_hosp, aes(x = date)) +
geom_line(aes(y = RedVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = BlueVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = GreenVacc, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = RedR, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = OrangeR, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = LightBlueR, color = "Pasteur Scenario"), se=FALSE) +
geom_line(aes(y = DarkBlueR, color = "Pasteur Scenario"), se=FALSE) +
theme_classic()
true_data_hosp <- read_delim("true_data_hosp.csv", ";", escape_double = FALSE, trim_ws = TRUE)
new_SC <- read_delim("new_SC_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data = new_SC, aes(x = date)) +
geom_line(aes(y = RedVacc, color = "Pasteur Scenarios"), se=FALSE) +
geom_line(aes(y = BlueVacc, color = "Pasteur Scenarios"), se=FALSE) +
geom_line(aes(y = GreenVacc, color = "Pasteur Scenarios"), se=FALSE) +
geom_line(aes(y = RedR, color = "Pasteur Scenarios"), se=FALSE) +
geom_line(aes(y = OrangeR, color = "Pasteur Scenarios"), se=FALSE) +
geom_line(aes(y = LightBlueR, color = "Pasteur Scenarios"), se=FALSE) +
geom_line(aes(y = DarkBlueR, color = "Pasteur Scenarios"), se=FALSE) +
theme_classic()
View(new_SC)
new_SC <- read_delim("new_SC_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
new_SC <- read_delim("new_SC_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data = new_SC, aes(x = date)) +
geom_line(aes(y = RedVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedR, color = "Pasteur Scenarios")) +
geom_line(aes(y = OrangeR, color = "Pasteur Scenarios")) +
geom_line(aes(y = LightBlueR, color = "Pasteur Scenarios")) +
geom_line(aes(y = DarkBlueR, color = "Pasteur Scenarios")) +
theme_classic()
#beds hospital
#corriger France métropolitaine ?
new_hosp <- read_delim("beds_hosp.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
#beds hospital
#corriger France métropolitaine ?
beds_hosp <- read_delim("beds_hosp.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
View(beds_hosp)
#beds hospital
#corriger France métropolitaine ?
beds_hosp <- read_delim("beds_hosp.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data = beds_hosp, aes(x = date)) +
geom_line(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic()
#beds hospital
#corriger France métropolitaine ?
beds_hosp <- read_delim("beds_hosp.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data = beds_hosp, aes(x = date)) +
geom_line(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic()
ggplot(data = beds_hosp, aes(x = date)) +
geom_smooth(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic()
ggplot(data = beds_hosp, aes(x = date)) +
geom_smooth(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic()
?geom_line
ggplot(data = beds_hosp, aes(x = date)) +
geom_smooth(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_path(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic()
ggplot(data = beds_hosp, aes(x = date)) +
#régler el problème : geom_line ne relie pas les points trop éloingés (problème surtout pour RedDots)
geom_smooth(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic()
lits_rea <- read_delim("lits_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
#true data from https://www.data.gouv.fr/fr/datasets/donnees-hospitalieres-relatives-a-lepidemie-de-covid-19/
#"donnees-hospitalieres-covid"
#to open it directly : https://www.data.gouv.fr/fr/datasets/r/63352e38-d353-4b54-bfd1-f1b3ee1cabd7
true_data_hosp_rea <- read_delim("true_data_hosp_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
filter(
#otherwise double count (0 = all, 1=men, 2=women)
sexe =="0",
#removes overseas territories (Pasteur scenarios only for metropolitan France)
dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(date = date(jour)) %>%
select(jour, rea, hosp) %>%
group_by(jour) %>%
summarise(
hosp = sum(hosp),
rea = sum(rea))
ggplot(data = lits_rea, aes(x=date)) +
geom_line(aes(y=rea_bed_14rate, color="Pasteur scenarios")) +
geom_line(aes(y=rea_bed_22rate, color="Pasteur scenarios")) +
geom_line(data= true_data_hosp_rea, aes(x=jour, y=rea, color = "true data")) +
#see dates of partial curfew + 2 weeks after (time to see the effects on reanimations) cf dates https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
geom_vline(xintercept = date("2020-10-14"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2020-10-28"), linetype = "dashed", alpha=.5) +
#date limitations
xlim(date("2020-09-15"), date("2020-11-10")) + ylim(0, 15000) + theme_classic()
ggplot(data = lits_rea, aes(x=date)) +
geom_line(aes(y=rea_bed_14rate, color="Pasteur scenarios")) +
geom_line(aes(y=rea_bed_22rate, color="Pasteur scenarios")) +
geom_line(data= true_data_hosp_rea, aes(x=jour, y=rea, color = "true data")) +
#see dates of partial curfew + 2 weeks after (time to see the effects on reanimations) cf dates https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
geom_vline(xintercept = date("2020-10-14"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2020-10-28"), linetype = "dashed", alpha=.5) +
#date limitations
xlim(date("2020-09-15"), date("2020-11-10")) + ylim(0, 15000) + theme_classic() +
ylab("Reanimation Beds") + xlab("")
adm_heb_hop_1 <- read_delim("new_hosp_INSERM.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
true_data_new_hosp_rea <- read_delim("true_data_new_hosp_rea.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
#removes overseas territories (Pasteur scenarios only for metropolitan France, not sur for INSERM)
filter(dep != 971 & dep != 972 & dep != 973 & dep != 974 & dep != 976 & dep != 978) %>%
mutate(
jour = as.Date(jour, format = "%d/%m/%Y", optional = T),
week = floor_date(jour, "week")) %>%
select(week, incid_rea, incid_hosp) %>%
group_by(week) %>%
summarise(hosp = sum(incid_hosp), rea = sum(incid_rea))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_line(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_line(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_line(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04"))
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_line(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_line(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_line(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04")) +
ylab("new hospitalisations") + xlab("")
ggplot(data = adm_heb_hop_1, aes(x = date)) +
geom_point(aes(y=true_points, color="true points INSERM")) +
#figure 1
geom_line(aes(y=fig1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 2
geom_line(aes(y=fig2_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig2_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#figure 3
geom_line(aes(y=fig3_1_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_2_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_3_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_4_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_5_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
geom_line(aes(y=fig3_6_new_hosp_week, color="scénarios INSERM"), se=FALSE) +
#problème : mes true data sont plus élevées que les true points de l'INSERM ~1400 : ne compta pas pareil les entrées en hospi ?
geom_line(data = true_data_new_hosp_rea, aes(x=week, y=hosp-1400, color="true data")) +
#confinement de 16 départements le 20 mars cf https://fr.wikipedia.org/wiki/Chronologie_de_la_pand%C3%A9mie_de_Covid-19_en_France
#2 semaines pour voir les effets sur hospitalisations. correspond aussi au confinement général du 3 avril
geom_vline(xintercept = date("2021-03-20"), linetype = "dashed", alpha=.5) +
geom_vline(xintercept = date("2021-04-03"), linetype = "dashed", alpha=.5) +
theme_classic() + xlim(date("2020-10-01"), date("2021-04-04")) +
ylab("weekly new hospitalisations") + xlab("")
#admission hospital
#corriger France métropolitaine ?
true_data_hosp <- read_delim("true_data_hosp.csv", ";", escape_double = FALSE, trim_ws = TRUE)
new_hosp <- read_delim("new_hosp_Pasteur.csv", ";", escape_double = FALSE, trim_ws = TRUE) %>%
mutate(date = as.Date(date, format = "%d/%m/%Y", optional = T))
ggplot(data = new_hosp, aes(x = date)) +
geom_line(aes(y = RedVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedR, color = "Pasteur Scenarios")) +
geom_line(aes(y = OrangeR, color = "Pasteur Scenarios")) +
geom_line(aes(y = LightBlueR, color = "Pasteur Scenarios")) +
geom_line(aes(y = DarkBlueR, color = "Pasteur Scenarios")) +
theme_classic()
ggplot(data = new_hosp, aes(x = date)) +
geom_line(aes(y = RedVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = BlueVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = GreenVacc, color = "Pasteur Scenarios")) +
geom_line(aes(y = RedR, color = "Pasteur Scenarios")) +
geom_line(aes(y = OrangeR, color = "Pasteur Scenarios")) +
geom_line(aes(y = LightBlueR, color = "Pasteur Scenarios")) +
geom_line(aes(y = DarkBlueR, color = "Pasteur Scenarios")) +
theme_classic() + ylab("Daily new hospitalisations") + xlab("")
ggplot(data = beds_hosp, aes(x = date)) +
#régler el problème : geom_line ne relie pas les points trop éloingés (problème surtout pour RedDots)
geom_smooth(aes(y = GreenFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = GreenDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = PurpleDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = BlueDots, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedFull, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDashed, color = "Pasteur Scenarios")) +
geom_smooth(aes(y = RedDots, color = "Pasteur Scenarios")) +
theme_classic() + ylab("Hospital beds") + xlab("")
setwd("~/Desktop/Graphs covid/2020_09_25_Pasteur")
